# general
alias et='mate .'
alias sshkey='cat ~/.ssh/id_rsa.pub | pbcopy && echo Public key copied to clipboard.'
alias cls='clear'

# directories
alias back='cd - > /tmp/nul'
alias ..='cd ..'
alias .2='cd ../..'
alias .3='cd ../../..'
alias .4='cd ../../../..'
alias dir='ls -Gl -A'
alias d='ls -Gl -A'
alias desktop='cd ~/Desktop'
alias sites='cd ~/Sites/'

# mark and go mark
alias m='echo "cd \"$PWD\"" > ~/.working-directory'
alias gm='test -r ~/.working-directory && source ~/.working-directory'

# ls
alias ls="ls -F"
alias l="ls -lAh"
alias ll="ls -l"
alias la='ls -A'

# ruby
alias gi='sudo gem install'

# git
alias gup='git pull'
alias gco='git checkout'
alias gc='git commit -v -a'
alias gcm='git commit -a -m'
alias gcma='git commit --amend'
alias gsta='git status'
alias gb='git branch'
alias gadd='git add'
alias giff='git diff'
alias grm="git status | grep deleted | awk '{print \$3}' | xargs git rm"

# svn
alias supe='svn update'
alias stae='svn status | sed -E "/(^$|^X|external item)/d"'
alias svncm='svn commit -m'
alias svnmv='svn rename'
alias svnren='svn rename'
alias svnignore='svn propedit svn:ignore'
alias svnrm='svn delete'
alias sdm='svn diff . | mate'


# mongrel
alias mr='mongrel_rails start'
alias mrp='mongrel_rails start -e production'
alias mrd='script/server --debugger'

# rails
alias ss='script/server'
alias sc='script/console'
alias sg='script/generate'
alias sgm='sg migration'
alias sgc='sg controller'
alias sp='script/plugin'
alias sr='script/runner'
alias a='autotest -rails'
alias tlog='tail -f log/development.log'
alias migrate='rake db:migrate db:test:clone'

### functions

function sta() {
	if test -d .svn
	then
	  echo "SVN status..."
	  ruby ~/.zsh/scripts/sta.rb --ignore-externals
	else
	  git status
	fi
}

function push() {
	if test -f .git/config; then
	  if grep svn-remote .git/config > /tmp/nul; then
	    echo "Pushing via git-svn..."
  	  git svn dcommit
  	else
  	  echo "Pushing via git..."
  	  git push
  	fi  
	fi
}

function sup() {
  if test -d .svn
  then
    svn update --ignore-externals
  elif test -d .git
  then
    git-svn rebase
  fi      
}

function addhost() {
  if [ -z "$1" ]
	then
    echo Please supply an argument.
  else
	  HOSTEXISTS=`grep $1 /etc/hosts`
    if [ -z "$HOSTEXISTS" ]; then
	    cp /etc/hosts $TMPDIR/hosts
			echo >> $TMPDIR/hosts
	    echo -n "127.0.0.1 $1" >> $TMPDIR/hosts
	    sudo cp $TMPDIR/hosts /etc/hosts
			echo Added hostname $1
		else
		  echo The hostname $1 already exists:
		  echo $HOSTEXISTS
		fi	
  fi
}

# make and switch into a directory
function mcd {
  mkdir $1 && cd $1
}

# move objects to trash
trash () { mv $1 ~/.Trash; }

# reload all functions
r() {
  local f
  f=(~/.zsh/functions/*(.))
  unfunction $f:t 2> /dev/null
  autoload -U $f:t
}